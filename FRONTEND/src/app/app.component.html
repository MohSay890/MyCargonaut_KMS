<!-- Header -->
<header class="header">
  <div class="header-container">
    <div class="header-content">
      <!-- Logo -->
      <a routerLink="/" class="logo">
        <img src="/MyCargonaut.png" alt="MyCargonaut Logo" class="logo-img">
      </a>

      <!-- Navigation -->
      <nav class="nav" *ngIf="!isAuthenticated">
        <a routerLink="/" class="nav-link">Startseite</a>
        <a routerLink="/how-it-works" class="nav-link">So funktioniert's</a>
        <a routerLink="/search" class="nav-link">Suchen</a>
        <a routerLink="/login" class="btn-login">Login</a>
        <a routerLink="/registration" class="btn-register">Registrieren</a>
      </nav>

      <!-- Authenticated Navigation -->
      <nav class="nav" *ngIf="isAuthenticated">
        <a routerLink="/how-it-works" class="nav-link">So funktioniert's</a>
        <a routerLink="/search" class="nav-link">Suchen</a>
        <a routerLink="/offer/create" class="nav-link">Anbieten</a>

        <!-- Favorites Heart -->
        <a routerLink="/favorites" class="nav-link favorites-link" title="Favoriten">
          <svg class="heart-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
          </svg>
          <span class="favorites-count" *ngIf="favoritesCount > 0">{{ favoritesCount }}</span>
        </a>

        <!-- User Menu -->
        <div class="user-menu">
          <button class="user-menu-trigger" (click)="toggleUserMenu()">
            <img [src]="currentUser?.avatar || 'https://i.pravatar.cc/40?img=1'" [alt]="currentUser?.name" class="user-avatar">
            <span class="user-name">{{ currentUser?.name }}</span>
            <span class="dropdown-arrow">â–¼</span>
          </button>

          <!-- Dropdown Menu -->
          <div class="user-dropdown" *ngIf="showUserMenu">
            <a routerLink="/dashboard" class="dropdown-item" (click)="closeUserMenu()">
              <span class="dropdown-icon">ðŸ“Š</span>
              Dashboard
            </a>
            <a routerLink="/profile" class="dropdown-item" (click)="closeUserMenu()">
              <span class="dropdown-icon">ðŸ‘¤</span>
              Mein Profil
            </a>
            <a routerLink="/my-trips" class="dropdown-item" (click)="closeUserMenu()">
              <span class="dropdown-icon">ðŸš—</span>
              Meine Fahrten
            </a>
            <a routerLink="/vehicle-editor" class="dropdown-item" (click)="closeUserMenu()">
              <span class="dropdown-icon">ðŸš™</span>
              Fahrzeuge
            </a>
            <a routerLink="/messages" class="dropdown-item" (click)="closeUserMenu()">
              <span class="dropdown-icon">ðŸ’¬</span>
              Nachrichten
            </a>
            <div class="dropdown-divider"></div>
            <button class="dropdown-item dropdown-logout" (click)="logout()">
              <span class="dropdown-icon">ðŸšª</span>
              Abmelden
            </button>
          </div>
        </div>
      </nav>
    </div>
  </div>
</header>

<router-outlet></router-outlet>
<!-- Header -->
<header class="header">
  <!-- ... Header bleibt wie er ist ... -->
</header>

<router-outlet></router-outlet>

<!-- Footer -->
<app-footer></app-footer>
